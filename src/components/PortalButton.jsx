import { useState } from 'react'
import { usePalette } from '../context/PaletteContext'

function PortalIcon({ color, size = 20 }) {
  return (
    <svg width={size} height={size} viewBox="0 0 586 1016" fill="none" xmlns="http://www.w3.org/2000/svg" style={{ display: 'block', transition: 'all 0.8s' }}>
      <path d="M458.41 0C388.042 0 331 227.293 331 507.664C331 788.042 388.042 1015.33 458.41 1015.33C528.781 1015.33 585.823 788.042 585.823 507.664C585.823 227.293 528.781 0 458.41 0Z" fill={color} fillOpacity="0.2"/>
      <path d="M149.672 545.109C162.203 512.453 172.526 479.01 183.693 443.927C187.625 431.536 175.76 419.984 163.469 424.224C158.427 425.953 153.469 427.479 148.427 428.62C129.911 432.839 125.516 446.979 119.672 460.776C111.156 480.922 102.599 501.047 94.0261 521.146C84.625 543.198 65.1302 552.901 45.2448 545.51C25.026 538 16.3906 518.115 25.0052 496.302C38.1979 462.885 52.1563 429.745 65.8281 396.505C72.3177 380.74 83.9427 370.458 100.615 364.693C150.115 347.563 199.417 329.849 248.896 312.635C292.854 297.333 336.875 314.365 358.063 354.693C373.464 384.016 389.026 413.255 403.766 442.88C410.412 456.24 419.25 464.172 435.396 465.635C461.323 467.984 487.104 471.901 512.891 475.536C535.641 478.75 550.281 495.745 547.833 515.323C545.141 536.714 525.865 550.328 502.349 547.521C466.521 543.24 430.755 538.422 394.849 535.005C376.031 533.219 363.141 524.724 353.724 509.62C353.661 509.542 353.62 509.438 353.563 509.359C346.495 498.052 329.422 500.12 325.208 512.776C315.224 542.818 305.625 571.781 296.771 600.984C295.323 605.74 299.641 613.958 303.839 618.193C329.182 643.682 355.005 668.724 381.234 693.37C394.708 706 402.964 720.823 407 738.297C417.583 784.047 428.448 829.755 439.01 875.531C443.771 896.156 441.542 915.417 423.385 929.677C408.245 941.563 390.896 944.135 372.479 937.224C356.13 931.083 347.234 918.99 343.359 902.844C333.5 861.891 323.198 821.042 313.74 780.01C310.224 764.745 303.115 752.677 290.766 742.193C252.349 709.615 215.401 675.411 176.542 643.339C143.427 615.964 134.292 585.177 149.672 545.109Z" fill={color}/>
      <path d="M14.1823 854.458C43.276 822.49 72.8177 790.854 102.922 759.766C115.354 746.932 123.286 732.953 126.656 715.661C129.771 699.714 133.625 683.891 137.802 666.896C140.635 655.307 154.792 650.932 163.667 658.906C183.427 676.635 202.167 693.448 220.563 710.578C222.99 712.849 223.333 718.714 222.49 722.469C218.693 739.458 214.979 756.552 209.474 773.078C206.344 782.479 201.182 791.958 194.594 799.49C159.63 839.359 124.188 878.844 88.3438 917.984C69.1823 938.896 37.8385 940.641 17.0104 923.187C-3.95312 905.573 -5.68228 876.271 14.1823 854.458Z" fill={color}/>
      <path d="M373.583 308.12C328.318 308.422 292.073 273.958 291.911 230.453C291.75 186.411 328.12 151.141 373.865 151C418.167 150.859 454.552 186.391 454.792 230.01C455.036 273.693 419.531 307.818 373.583 308.12Z" fill={color}/>
    </svg>
  )
}

export default function PortalButton() {
  const { pal, shiftPalette } = usePalette()
  const [hover, setHover] = useState(false)
  return (
    <button
      onClick={shiftPalette}
      onMouseEnter={() => setHover(true)}
      onMouseLeave={() => setHover(false)}
      title="Shift colors"
      style={{
        position: 'fixed',
        top: 20,
        right: 20,
        width: 32,
        height: 32,
        border: 'none',
        background: 'transparent',
        cursor: 'pointer',
        display: 'flex',
        alignItems: 'center',
        justifyContent: 'center',
        transition: 'all 0.4s ease',
        zIndex: 100,
        opacity: hover ? 1 : 0.8,
        transform: hover ? 'scale(1.15)' : 'scale(1)',
      }}
    >
      <PortalIcon color={pal.accent} size={24} />
    </button>
  )
}
